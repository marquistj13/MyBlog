var Holder=Holder||{};(function(g,d){var u=false,m=false,c=document.createElement("canvas");var a=1,s=1;var b=[];if(!c.getContext){m=true}else{if(c.toDataURL("image/png").indexOf("data:image/png")<0){m=true}else{var l=c.getContext("2d")}}if(!m){a=window.devicePixelRatio||1,s=l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1}var f=a/s;var q={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12},sky:{background:"#0D8FDB",foreground:"#fff",size:12},vine:{background:"#39DBAC",foreground:"#1E292C",size:12},lava:{background:"#F8591A",foreground:"#1C2846",size:12}},stylesheet:""};g.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(x){var w=this.regex.exec(x);return{width:+w[1],height:+w[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(x){var w=this.regex.exec(x);return{width:w[1],height:w[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(x){var w=this.regex.exec(x);return{size:q.themes.gray.size,foreground:"#"+w[2],background:"#"+w[1]}}},text:{regex:/text\:(.*)/,output:function(w){return this.regex.exec(w)[1]}},font:{regex:/font\:(.*)/,output:function(w){return this.regex.exec(w)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(w){return this.regex.exec(w)[1]}}};document.getElementsByClassName||(document.getElementsByClassName=function(A){var x=document,B,z,w,y=[];if(x.querySelectorAll){return x.querySelectorAll("."+A)}if(x.evaluate){z=".//*[contains(concat(' ', @class, ' '), ' "+A+" ')]",B=x.evaluate(z,x,null,0,null);while(w=B.iterateNext()){y.push(w)}}else{B=x.getElementsByTagName("*"),z=new RegExp("(^|\\s)"+A+"(\\s|$)");for(w=0;w<B.length;w++){z.test(B[w].className)&&y.push(B[w])}}return y});window.getComputedStyle||(window.getComputedStyle=function(w){return this.el=w,this.getPropertyValue=function(x){var y=/(\-([a-z]){1})/g;return x=="float"&&(x="styleFloat"),y.test(x)&&(x=x.replace(y,function(){return arguments[2].toUpperCase()})),w.currentStyle[x]?w.currentStyle[x]:null},this});function r(z,K){var A="complete",L="readystatechange",J=!1,C=J,F=!0,B=z.document,H=B.documentElement,E=B.addEventListener?"addEventListener":"attachEvent",I=B.addEventListener?"removeEventListener":"detachEvent",D=B.addEventListener?"":"on",w=function(y){(y.type!=L||B.readyState==A)&&((y.type=="load"?z:B)[I](D+y.type,w,J),!C&&(C=!0)&&K.call(z,null))},x=function(){try{H.doScroll("left")}catch(y){setTimeout(x,50);return}w("poll")};if(B.readyState==A){K.call(z,"lazy")}else{if(B.createEventObject&&H.doScroll){try{F=!z.frameElement}catch(G){}F&&x()}B[E](D+"DOMContentLoaded",w,J),B[E](D+L,w,J),z[E](D+"load",w,J)}}function n(x){x=x.match(/^(\W)?(.*)/);var w=document["getElement"+(x[1]?x[1]=="#"?"ById":"sByClassName":"sByTagName")](x[2]);var y=[];w!==null&&(w.length?y=w:w.length===0?y=w:y=[w]);return y}function p(x,w){var z={};for(var y in x){if(x.hasOwnProperty(y)){z[y]=x[y]}}for(var y in w){if(w.hasOwnProperty(y)){z[y]=w[y]}}return z}if(!Object.prototype.hasOwnProperty){Object.prototype.hasOwnProperty=function(x){var w=this.__proto__||this.constructor.prototype;return(x in this)&&(!(x in w)||w[x]!==this[x])}}function i(B,x,A){x=parseInt(x,10);B=parseInt(B,10);var w=Math.max(x,B);var z=Math.min(x,B);var C=1/12;var y=Math.min(z*0.75,0.75*w*C);return{height:Math.round(Math.max(A.size,y))}}function h(E){var K=E.ctx;var w=E.dimensions;var H=E.template;var D=E.ratio;var F=E.holder;var G=F.textmode=="literal";var A=F.textmode=="exact";var C=i(w.width,w.height,H);var B=C.height;var y=w.width*D,J=w.height*D;var z=H.font?H.font:"sans-serif";c.width=y;c.height=J;K.textAlign="center";K.textBaseline="middle";K.fillStyle=H.background;K.fillRect(0,0,y,J);K.fillStyle=H.foreground;K.font="bold "+B+"px "+z;var I=H.text?H.text:(Math.floor(w.width)+"x"+Math.floor(w.height));if(G){var w=F.dimensions;I=w.width+"x"+w.height}else{if(A&&F.exact_dimensions){var w=F.exact_dimensions;I=(Math.floor(w.width)+"x"+Math.floor(w.height))}}var x=K.measureText(I).width;if(x/y>=0.75){B=Math.floor(B*0.75*(y/x))}K.font="bold "+(B*D)+"px "+z;K.fillText(I,(y/2),(J/2),y);return c.toDataURL("image/png")}function v(D,y,x,C){var z=x.dimensions,A=x.theme,B=x.text?decodeURIComponent(x.text):x.text;var w=z.width+"x"+z.height;A=(B?p(A,{text:B}):A);A=(x.font?p(A,{font:x.font}):A);y.setAttribute("data-src",C);x.theme=A;y.holder_data=x;if(D=="image"){y.setAttribute("alt",B?B:A.text?A.text+" ["+w+"]":w);if(m||!x.auto){y.style.width=z.width+"px";y.style.height=z.height+"px"}if(m){y.style.backgroundColor=A.background}else{y.setAttribute("src",h({ctx:l,dimensions:z,template:A,ratio:f,holder:x}));if(x.textmode&&x.textmode=="exact"){b.push(y);t(y)}}}else{if(D=="background"){if(!m){y.style.backgroundImage="url("+h({ctx:l,dimensions:z,template:A,ratio:f,holder:x})+")";y.style.backgroundSize=z.width+"px "+z.height+"px"}}else{if(D=="fluid"){y.setAttribute("alt",B?B:A.text?A.text+" ["+w+"]":w);if(z.height.slice(-1)=="%"){y.style.height=z.height}else{y.style.height=z.height+"px"}if(z.width.slice(-1)=="%"){y.style.width=z.width}else{y.style.width=z.width+"px"}if(y.style.display=="inline"||y.style.display===""||y.style.display=="none"){y.style.display="block"}if(m){y.style.backgroundColor=A.background}else{b.push(y);t(y)}}}}}function k(w,y){var x={height:w.clientHeight,width:w.clientWidth};if(!x.height&&!x.width){if(w.hasAttribute("data-holder-invisible")){throw new Error("Holder: placeholder is not visible")}else{w.setAttribute("data-holder-invisible",true);setTimeout(function(){y.call(this,w)},1);return null}}else{w.removeAttribute("data-holder-invisible")}return x}function t(z){var w;if(z.nodeType==null){w=b}else{w=[z]}for(var y in w){if(!w.hasOwnProperty(y)){continue}var A=w[y];if(A.holder_data){var x=A.holder_data;var B=k(A,t);if(B){if(x.fluid){A.setAttribute("src",h({ctx:l,dimensions:B,template:x.theme,ratio:f,holder:x}))}if(x.textmode&&x.textmode=="exact"){x.exact_dimensions=B;A.setAttribute("src",h({ctx:l,dimensions:x.dimensions,template:x.theme,ratio:f,holder:x}))}}}}}function e(x,z){var y={theme:p(q.themes.gray,{})};var A=false;for(sl=x.length,j=0;j<sl;j++){var w=x[j];if(g.flags.dimensions.match(w)){A=true;y.dimensions=g.flags.dimensions.output(w)}else{if(g.flags.fluid.match(w)){A=true;y.dimensions=g.flags.fluid.output(w);y.fluid=true}else{if(g.flags.textmode.match(w)){y.textmode=g.flags.textmode.output(w)}else{if(g.flags.colors.match(w)){y.theme=g.flags.colors.output(w)}else{if(z.themes[w]){if(z.themes.hasOwnProperty(w)){y.theme=p(z.themes[w],{})}}else{if(g.flags.font.match(w)){y.font=g.flags.font.output(w)}else{if(g.flags.auto.match(w)){y.auto=true}else{if(g.flags.text.match(w)){y.text=g.flags.text.output(w)}}}}}}}}}return A?y:false}for(var o in g.flags){if(!g.flags.hasOwnProperty(o)){continue}g.flags[o].match=function(w){return w.match(this.regex)}}g.add_theme=function(w,x){w!=null&&x!=null&&(q.themes[w]=x);return g};g.add_image=function(B,z){var A=n(z);if(A.length){for(var y=0,w=A.length;y<w;y++){var x=document.createElement("img");x.setAttribute("data-src",B);A[y].appendChild(x)}}return g};g.run=function(x){u=true;var L=p(q,x),I=[],G=[],K=[];if(typeof(L.images)=="string"){G=n(L.images)}else{if(window.NodeList&&L.images instanceof window.NodeList){G=L.images}else{if(window.Node&&L.images instanceof window.Node){G=[L.images]}}}if(typeof(L.bgnodes)=="string"){K=n(L.bgnodes)}else{if(window.NodeList&&L.elements instanceof window.NodeList){K=L.bgnodes}else{if(window.Node&&L.bgnodes instanceof window.Node){K=[L.bgnodes]}}}for(C=0,A=G.length;C<A;C++){I.push(G[C])}var z=document.getElementById("holderjs-style");if(!z){z=document.createElement("style");z.setAttribute("id","holderjs-style");z.type="text/css";document.getElementsByTagName("head")[0].appendChild(z)}if(!L.nocss){if(z.styleSheet){z.styleSheet.cssText+=L.stylesheet}else{z.appendChild(document.createTextNode(L.stylesheet))}}var H=new RegExp(L.domain+'/(.*?)"?\\)');for(var A=K.length,C=0;C<A;C++){var w=window.getComputedStyle(K[C],null).getPropertyValue("background-image");var y=w.match(H);var F=K[C].getAttribute("data-background-src");if(y){var J=e(y[1].split("/"),L);if(J){v("background",K[C],J,w)}}else{if(F!=null){var J=e(F.substr(F.lastIndexOf(L.domain)+L.domain.length+1).split("/"),L);if(J){v("background",K[C],J,w)}}}}for(A=I.length,C=0;C<A;C++){var B,D;D=B=w=null;try{D=I[C].getAttribute("src");attr_datasrc=I[C].getAttribute("data-src")}catch(E){}if(attr_datasrc==null&&!!D&&D.indexOf(L.domain)>=0){w=D}else{if(!!attr_datasrc&&attr_datasrc.indexOf(L.domain)>=0){w=attr_datasrc}}if(w){var J=e(w.substr(w.lastIndexOf(L.domain)+L.domain.length+1).split("/"),L);if(J){if(J.fluid){v("fluid",I[C],J,w)}else{v("image",I[C],J,w)}}}}return g};r(d,function(){if(window.addEventListener){window.addEventListener("resize",t,false);window.addEventListener("orientationchange",t,false)}else{window.attachEvent("onresize",t)}u||g.run()});if(typeof define==="function"&&define.amd){define([],function(){return g})}})(Holder,window);